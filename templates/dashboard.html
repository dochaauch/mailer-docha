{% extends "base.html" %}

{% block content %}
<div class="bg-white rounded-2xl shadow-md p-6 w-full max-w-xl mx-auto mt-10">

  <h2 class="text-xl font-semibold mb-4 flex items-center">
    ğŸ‘‹ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, {{ client.display_name }}!
  </h2>

  <p class="mb-4 text-gray-700">Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¸ÑÑŒĞ¼Ğ° Ğ²Ğ°ÑˆĞ¸Ğ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼?</p>

  <form method="post" action="/send" onsubmit="handleSendClick(event)">
    <button id="sendButton" type="submit" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-xl shadow transition duration-300">
      ğŸ’Œ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¸ÑÑŒĞ¼Ğ°
    </button>
  </form>

  <!-- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ -->
  <div id="progressWrapper" class="mt-4 hidden w-full bg-gray-200 rounded-full h-4 shadow-inner">
    <div id="progressBar" class="bg-green-500 h-4 rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
  </div>

  <form method="post" action="/logout" class="mt-6">
    <button class="text-red-600 hover:text-red-800 flex items-center gap-1">
      ğŸªµ Ğ’Ñ‹Ğ¹Ñ‚Ğ¸
    </button>
  </form>
</div>

<script>
  function handleSendClick(e) {
    const btn = document.getElementById('sendButton');
    const wrapper = document.getElementById('progressWrapper');
    const bar = document.getElementById('progressBar');

    btn.disabled = true;
    btn.classList.add('opacity-50', 'cursor-not-allowed');
    wrapper.classList.remove('hidden');

    // ĞŸĞ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ° Ğ´Ğ¾ ~95%
    let progress = 0;
    const interval = setInterval(() => {
      progress += Math.random() * 5;
      bar.style.width = Math.min(progress, 95) + "%";
    }, 300);

    // ĞŸÑ€ĞµĞºÑ€Ğ°Ñ‚Ğ¸Ğ¼ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ ÑƒÑ…Ğ¾Ğ´Ğµ ÑĞ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
    window.addEventListener("beforeunload", () => clearInterval(interval));
  }
</script>
{% endblock %}
